volumes:
  pc:
    # bootloader configuration is shipped and managed by snapd
    bootloader: grub
    schema: gpt
    structure:
      - name: EFI System partition
        role: system-seed-null
        filesystem: vfat
        type: C12A7328-F81F-11D2-BA4B-00A0C93EC93B
        size: 248951808
        offset: 1048576
        update:
          edition: 2
        content:
          - source: grubx64.efi
            target: EFI/boot/grubx64.efi
          - source: shim.efi.signed
            target: EFI/boot/bootx64.efi
      - # Recovery partition
        type: E3C9E316-0B5C-4DB8-817D-F92DF00215AE
        size: 8192000000
        offset: 250000384
      - name: ubuntu-boot
        role: system-boot
        filesystem: ext4
        type: 0FC63DAF-8483-4772-8E79-3D69D8477DE4
        # Such that potentially there is space to later slot-in 1200M
        # large ubuntu-seed partition
        # TODO check that offset is correct given the ESP size (?!)
        offset: 9202M
        size: 750M
        update:
          edition: 1
        content:
          - source: grubx64.efi
            target: EFI/boot/grubx64.efi
          - source: shim.efi.signed
            target: EFI/boot/bootx64.efi
      - name: ubuntu-save
        role: system-save
        filesystem: ext4
        type: 0FC63DAF-8483-4772-8E79-3D69D8477DE4
        size: 32M
      - name: ubuntu-data
        role: system-data
        filesystem: ext4
        type: 0FC63DAF-8483-4772-8E79-3D69D8477DE4
        size: 4G
kernel-cmdline:
    allow:
      - dhc-dev-mode
